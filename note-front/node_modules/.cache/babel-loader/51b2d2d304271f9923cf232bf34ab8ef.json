{"remainingRequest":"D:\\2718075060\\Desk\\sspku\\云计算\\Note\\note-front\\node_modules\\.store\\babel-loader@8.3.0\\node_modules\\babel-loader\\lib\\index.js!D:\\2718075060\\Desk\\sspku\\云计算\\Note\\note-front\\node_modules\\.store\\cache-loader@4.1.0\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\2718075060\\Desk\\sspku\\云计算\\Note\\note-front\\node_modules\\.store\\vue-loader@15.11.1\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\2718075060\\Desk\\sspku\\云计算\\Note\\note-front\\src\\views\\submitNote\\childrens\\Editor.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\2718075060\\Desk\\sspku\\云计算\\Note\\note-front\\src\\views\\submitNote\\childrens\\Editor.vue","mtime":1703320567698},{"path":"D:\\2718075060\\Desk\\sspku\\云计算\\Note\\note-front\\babel.config.js","mtime":1703320567604},{"path":"D:\\2718075060\\Desk\\sspku\\云计算\\Note\\note-front\\node_modules\\.store\\cache-loader@4.1.0\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\2718075060\\Desk\\sspku\\云计算\\Note\\note-front\\node_modules\\.store\\babel-loader@8.3.0\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"D:\\2718075060\\Desk\\sspku\\云计算\\Note\\note-front\\node_modules\\.store\\cache-loader@4.1.0\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\2718075060\\Desk\\sspku\\云计算\\Note\\note-front\\node_modules\\.store\\vue-loader@15.11.1\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgc2F2ZU5vdGVDb250ZW50SW1hZ2UgfSBmcm9tICdAL25ldHdvcmsvbm90ZS9pbmRleC5qcyc7CmltcG9ydCBlZGl0b3JDb25mIGZyb20gJy4vZWRpdG9yQ29uZic7CmV4cG9ydCBkZWZhdWx0IHsKICBtb2RlbDogewogICAgcHJvcDogJ2NvbnRlbnQnLAogICAgZXZlbnQ6ICd1cGRhdGVDb250ZW50JwogIH0sCiAgcHJvcHM6IHsKICAgIGNvbnRlbnQ6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAnJwogICAgfQogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGVkaXRvclZhbHVlOiAnJywKICAgICAgaW1nRmlsZXM6IHt9LAogICAgICBlZGl0b3JDb25mCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgaGFuZGxlSW1nQWRkKHBvcywgZmlsZSkgewogICAgICB0aGlzLmltZ0ZpbGVzW3Bvc10gPSBmaWxlOwogICAgfSwKICAgIGhhbmRsZUltZ0RlbChwb3MpIHsKICAgICAgZGVsZXRlIHRoaXMuaW1nRmlsZXNbcG9zXTsKICAgIH0sCiAgICBpc05lZWRVcGxvYWQoKSB7CiAgICAgIHJldHVybiBPYmplY3Qua2V5cyh0aGlzLmltZ0ZpbGVzKS5sZW5ndGggIT0gMDsKICAgIH0sCiAgICB1cGxvYWRpbWcoKSB7CiAgICAgIGNvbnN0IGZvcm1kYXRhID0gbmV3IEZvcm1EYXRhKCk7CiAgICAgIGZvciAoY29uc3Qga2V5IGluIHRoaXMuaW1nRmlsZXMpIHsKICAgICAgICBmb3JtZGF0YS5hcHBlbmQoJ2ZpbGVzJywgdGhpcy5pbWdGaWxlc1trZXldLCBgJHtrZXl9LiR7dGhpcy5pbWdGaWxlc1trZXldLm5hbWUuc3BsaXQoJy4nKVsxXX1gKTsKICAgICAgfQoKICAgICAgLyoqDQogICAgICAgKiDov5Tlm55wcm9taXNl77yM5aSW6Z2i55SoYXdhaXTosIPnlKjvvIzkv53or4HkuIrkvKDlrozmiJDkuYvlkI7vvIznrJTorrDkuK3nmoTlm77niYflnLDlnYDlt7Lnu4/mjaLmiJDkuobmnI3liqHlmajnmoTlnLDlnYANCiAgICAgICAqLwogICAgICByZXR1cm4gc2F2ZU5vdGVDb250ZW50SW1hZ2UoZm9ybWRhdGEpLnRoZW4ocmVzID0+IHsKICAgICAgICAvKioNCiAgICAgICAgICogcmVzLmRhdGENCiAgICAgICAgICogICAgMS5qcGc6IHVybA0KICAgICAgICAgKiAgICAyLmpwZzogdXJsDQogICAgICAgICAqICAgIC4uLg0KICAgICAgICAgKi8KICAgICAgICBmb3IgKGNvbnN0IGtleSBpbiByZXMuZGF0YSkgewogICAgICAgICAgdGhpcy4kcmVmcy5tZC4kaW1nMlVybChrZXkuc3BsaXQoJy4nKVswXSwgcmVzLmRhdGFba2V5XSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9KTsKICAgIH0KICB9LAogIHdhdGNoOiB7CiAgICAvLyB2LW1vZGVsCiAgICBlZGl0b3JWYWx1ZSh2YWx1ZSkgewogICAgICB0aGlzLiRlbWl0KCd1cGRhdGVDb250ZW50JywgdmFsdWUpOwogICAgfQogIH0KfTs="},{"version":3,"names":["saveNoteContentImage","editorConf","model","prop","event","props","content","type","String","default","data","editorValue","imgFiles","methods","handleImgAdd","pos","file","handleImgDel","isNeedUpload","Object","keys","length","uploadimg","formdata","FormData","key","append","name","split","then","res","$refs","md","$img2Url","watch","value","$emit"],"sources":["src/views/submitNote/childrens/Editor.vue"],"sourcesContent":["<template>\r\n  <mavon-editor\r\n    id=\"editor\"\r\n    v-model=\"editorValue\"\r\n    :toolbars=\"editorConf\"\r\n    ref=\"md\"\r\n    @imgAdd=\"handleImgAdd\"\r\n    @imgDel=\"handleImgDel\"\r\n    language=\"en\"\r\n  ></mavon-editor>\r\n</template>\r\n\r\n<script>\r\nimport { saveNoteContentImage } from '@/network/note/index.js'\r\nimport editorConf from './editorConf'\r\n\r\nexport default {\r\n  model: {\r\n    prop: 'content',\r\n    event: 'updateContent'\r\n  },\r\n  props: {\r\n    content: {\r\n      type: String,\r\n      default: ''\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      editorValue: '',\r\n      imgFiles: {},\r\n      editorConf\r\n    }\r\n  },\r\n  methods: {\r\n    handleImgAdd(pos, file) {\r\n      this.imgFiles[pos] = file\r\n    },\r\n    handleImgDel(pos) {\r\n      delete this.imgFiles[pos]\r\n    },\r\n    isNeedUpload() {\r\n      return Object.keys(this.imgFiles).length != 0\r\n    },\r\n    uploadimg() {\r\n      const formdata = new FormData()\r\n      for (const key in this.imgFiles) {\r\n        formdata.append(\r\n          'files',\r\n          this.imgFiles[key],\r\n          `${key}.${this.imgFiles[key].name.split('.')[1]}`\r\n        )\r\n      }\r\n\r\n      /**\r\n       * 返回promise，外面用await调用，保证上传完成之后，笔记中的图片地址已经换成了服务器的地址\r\n       */\r\n      return saveNoteContentImage(formdata).then((res) => {\r\n        /**\r\n         * res.data\r\n         *    1.jpg: url\r\n         *    2.jpg: url\r\n         *    ...\r\n         */\r\n        for (const key in res.data) {\r\n          this.$refs.md.$img2Url(key.split('.')[0], res.data[key])\r\n        }\r\n\r\n        return true\r\n      })\r\n    }\r\n  },\r\n  watch: {\r\n    // v-model\r\n    editorValue(value) {\r\n      this.$emit('updateContent', value)\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n#editor {\r\n  min-height: 400px;\r\n}\r\n</style>\r\n"],"mappings":"AAaA,SAAAA,oBAAA;AACA,OAAAC,UAAA;AAEA;EACAC,KAAA;IACAC,IAAA;IACAC,KAAA;EACA;EACAC,KAAA;IACAC,OAAA;MACAC,IAAA,EAAAC,MAAA;MACAC,OAAA;IACA;EACA;EACAC,KAAA;IACA;MACAC,WAAA;MACAC,QAAA;MACAX;IACA;EACA;EACAY,OAAA;IACAC,aAAAC,GAAA,EAAAC,IAAA;MACA,KAAAJ,QAAA,CAAAG,GAAA,IAAAC,IAAA;IACA;IACAC,aAAAF,GAAA;MACA,YAAAH,QAAA,CAAAG,GAAA;IACA;IACAG,aAAA;MACA,OAAAC,MAAA,CAAAC,IAAA,MAAAR,QAAA,EAAAS,MAAA;IACA;IACAC,UAAA;MACA,MAAAC,QAAA,OAAAC,QAAA;MACA,WAAAC,GAAA,SAAAb,QAAA;QACAW,QAAA,CAAAG,MAAA,CACA,SACA,KAAAd,QAAA,CAAAa,GAAA,GACA,GAAAA,GAAA,SAAAb,QAAA,CAAAa,GAAA,EAAAE,IAAA,CAAAC,KAAA,UACA;MACA;;MAEA;AACA;AACA;MACA,OAAA5B,oBAAA,CAAAuB,QAAA,EAAAM,IAAA,CAAAC,GAAA;QACA;AACA;AACA;AACA;AACA;AACA;QACA,WAAAL,GAAA,IAAAK,GAAA,CAAApB,IAAA;UACA,KAAAqB,KAAA,CAAAC,EAAA,CAAAC,QAAA,CAAAR,GAAA,CAAAG,KAAA,UAAAE,GAAA,CAAApB,IAAA,CAAAe,GAAA;QACA;QAEA;MACA;IACA;EACA;EACAS,KAAA;IACA;IACAvB,YAAAwB,KAAA;MACA,KAAAC,KAAA,kBAAAD,KAAA;IACA;EACA;AACA"}]}