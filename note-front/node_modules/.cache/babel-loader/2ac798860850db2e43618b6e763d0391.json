{"remainingRequest":"D:\\2718075060\\Desk\\sspku\\云计算\\Note\\note-front\\node_modules\\.store\\babel-loader@8.3.0\\node_modules\\babel-loader\\lib\\index.js!D:\\2718075060\\Desk\\sspku\\云计算\\Note\\note-front\\node_modules\\.store\\eslint-loader@2.2.1\\node_modules\\eslint-loader\\index.js??ref--14-0!D:\\2718075060\\Desk\\sspku\\云计算\\Note\\note-front\\src\\network\\index.js","dependencies":[{"path":"D:\\2718075060\\Desk\\sspku\\云计算\\Note\\note-front\\src\\network\\index.js","mtime":1703320567644},{"path":"D:\\2718075060\\Desk\\sspku\\云计算\\Note\\note-front\\babel.config.js","mtime":1703320567604},{"path":"D:\\2718075060\\Desk\\sspku\\云计算\\Note\\note-front\\node_modules\\.store\\cache-loader@4.1.0\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\2718075060\\Desk\\sspku\\云计算\\Note\\note-front\\node_modules\\.store\\babel-loader@8.3.0\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"D:\\2718075060\\Desk\\sspku\\云计算\\Note\\note-front\\node_modules\\.store\\eslint-loader@2.2.1\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9NZXNzYWdlMiBmcm9tICJlbGVtZW50LXVpL2xpYi90aGVtZS1jaGFsay9tZXNzYWdlLmNzcyI7CmltcG9ydCAiZWxlbWVudC11aS9saWIvdGhlbWUtY2hhbGsvYmFzZS5jc3MiOwppbXBvcnQgX01lc3NhZ2UgZnJvbSAiZWxlbWVudC11aS9saWIvbWVzc2FnZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnB1c2guanMiOwppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOwppbXBvcnQgY29kZU1hcCBmcm9tICIuL1Jlc3VsdENvZGUiOwppbXBvcnQgcm91dGVyIGZyb20gIkAvcm91dGVyIjsKaW1wb3J0IHsgbG9nb3V0IH0gZnJvbSAiQC91dGlscy91c2VyVXRpbC5qcyI7CmltcG9ydCB7IGlzSlNPTiB9IGZyb20gIkAvdXRpbHMvanNvblV0aWwuanMiOwppbXBvcnQgeyByZWZyZXNoVG9rZW5BcGkgfSBmcm9tICIuL2xvZ2luL2luZGV4IjsKaW1wb3J0IE5Qcm9ncmVzcyBmcm9tICJucHJvZ3Jlc3MiOwppbXBvcnQgIm5wcm9ncmVzcy9ucHJvZ3Jlc3MuY3NzIjsKTlByb2dyZXNzLmNvbmZpZ3VyZSh7CiAgc2hvd1NwaW5uZXI6IGZhbHNlCn0pOyAvLyDlhbPpl63ov5vluqbmnaHlnIbnjq8KCmNvbnN0IGluc3RhbmNlID0gYXhpb3MuY3JlYXRlKHsKICBiYXNlVVJMOiBwcm9jZXNzLmVudi5WVUVfQVBQX1NFUlZFUl9VUkwsCiAgdGltZW91dDogMTAwMDAKfSk7CgovKioNCiAqIOagueaNrmxvY2FsU3RvcmFnZeS4reeahHRva2Vu55Sf5oiQ5a+55bqU5ZCO56uv5ZON5bqU55qE6K+35rGC5aS0DQogKiBAcGFyYW0geyp9IGNvbmZpZw0KICovCmZ1bmN0aW9uIGdlbmVyYXRlQXV0aG9yaXphdGlvbkhlYWRlcihjb25maWcpIHsKICBjb25zdCB0b2tlbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJ0b2tlbiIpOwogIGlmICh0b2tlbikgewogICAgY29uZmlnLmhlYWRlcnMuQXV0aG9yaXphdGlvbiA9IGBCZWFyZXIgJHtKU09OLnBhcnNlKHRva2VuKX1gOwogIH0KICByZXR1cm4gY29uZmlnOwp9CmxldCBpc1JlZnJlc2hpbmcgPSB0cnVlOwpsZXQgc3Vic2NyaWJlcnMgPSBbXTsKZnVuY3Rpb24gaGFuZGxlRXhwaXJlZFRva2VuKHJlcykgewogIC8vIOWIt+aWsHRva2Vu55qE5Ye95pWwLOi/memcgOimgea3u+WKoOS4gOS4quW8gOWFs++8jOmYsuatoumHjeWkjeivt+axggogIGlmIChpc1JlZnJlc2hpbmcpIHsKICAgIHJlZnJlc2hUb2tlblJlcXVzdCgpOwogIH0KICBpc1JlZnJlc2hpbmcgPSBmYWxzZTsKCiAgLy8g5Zug5Li66K+35rGC5L2T5Lit5pyJ5pWw5o2u77yM54S25ZCOdG9rZW7lpLHmlYjkuYvlkI7vvIzmlLbpm4bov5nkuKrlpLHotKXnmoTor7fmsYLvvIzov5nkuKrml7blgJnor7fmsYLkvZPnmoTmlbDmja7lsLHkvJrlj5jmiJBqc29u5qC85byP77yM5Lya5b2x5ZON5Yiw5o6l5Y+jCiAgaWYgKGlzSlNPTihyZXMuY29uZmlnLmRhdGEpKSB7CiAgICByZXMuY29uZmlnLmRhdGEgPSBKU09OLnBhcnNlKHJlcy5jb25maWcuZGF0YSk7CiAgfQogIC8vIOi/meS4qlByb21pc2Xlh73mlbDlvojlhbPplK4KICBjb25zdCByZXRyeU9yaWdpbmFsUmVxdWVzdCA9IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gewogICAgYWRkU3Vic2NyaWJlcigoKSA9PiB7CiAgICAgIHJlc29sdmUoaW5zdGFuY2UocmVzLmNvbmZpZykpOwogICAgfSk7CiAgfSk7CiAgcmV0dXJuIHJldHJ5T3JpZ2luYWxSZXF1ZXN0Owp9CgovLyDpgY3ljobmiafooYzpnIDopoHmiafooYznmoTlh73mlbAKZnVuY3Rpb24gb25BY2Nlc3NUb2tlbkZldGNoZWQoKSB7CiAgc3Vic2NyaWJlcnMuZm9yRWFjaChjYWxsYmFjayA9PiB7CiAgICBjYWxsYmFjaygpOwogIH0pOwogIHN1YnNjcmliZXJzID0gW107Cn0KCi8vIOaUtumbhumcgOimgeaJp+ihjOeahOWHveaVsApmdW5jdGlvbiBhZGRTdWJzY3JpYmVyKGNhbGxiYWNrKSB7CiAgc3Vic2NyaWJlcnMucHVzaChjYWxsYmFjayk7Cn0KZnVuY3Rpb24gcmVmcmVzaFRva2VuUmVxdXN0KCkgewogIGNvbnN0IHJlZnJlc2hUb2tlbiA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oInJlZnJlc2hUb2tlbiIpKTsKICBjb25zdCB1c2VySW5mbyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oInVzZXJJbmZvIikpOwogIHJlZnJlc2hUb2tlbkFwaSh7CiAgICBsb2dpbkluZm86IHsKICAgICAgdXNlcklkOiB1c2VySW5mby51c2VyaWQKICAgIH0sCiAgICByZWZyZXNoVG9rZW46IHJlZnJlc2hUb2tlbgogIH0pLnRoZW4ocmVzID0+IHsKICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJyZWZyZXNoVG9rZW4iLCBKU09OLnN0cmluZ2lmeShyZXMuZGF0YS5yZWZyZXNoVG9rZW4pKTsKICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJ0b2tlbiIsIEpTT04uc3RyaW5naWZ5KHJlcy5kYXRhLnRva2VuKSk7CiAgICBvbkFjY2Vzc1Rva2VuRmV0Y2hlZCgpOwogICAgaXNSZWZyZXNoaW5nID0gdHJ1ZTsKICB9KTsKfQoKLy8gcmVxdWVzdCBpbnRlcmNlcAppbnN0YW5jZS5pbnRlcmNlcHRvcnMucmVxdWVzdC51c2UoY29uZmlnID0+IHsKICAvLyDlvIDlkK/ov5vluqbmnaEKICBOUHJvZ3Jlc3Muc3RhcnQoKTsKICAvLyDmt7vliqDor7fmsYLlpLTvvIzph4zpnaLmlL7lhaXkuI7mnI3liqHlmajnuqblrprlpb3nmoTmoLzlvI8KICByZXR1cm4gZ2VuZXJhdGVBdXRob3JpemF0aW9uSGVhZGVyKGNvbmZpZyk7Cn0sIGVyciA9PiB7CiAgX01lc3NhZ2UuZXJyb3IoZXJyKTsKICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyKTsKfSk7CmZ1bmN0aW9uIHJlc3BvbnNlU3VjY2Vzc0hhbmRsZXIocmVzKSB7CiAgLy8g5YWz6Zet6L+b5bqm5p2hCiAgTlByb2dyZXNzLmRvbmUoKTsKICBjb25zdCBjb2RlID0gcmVzLmRhdGEuY29kZTsKICBjb25zdCBtZXNzYWdlID0gcmVzLmRhdGEubWVzc2FnZTsKCiAgLy8g6ZSZ6K+v5L+h5oGv6YO95LuO5o6l5Y+j6I635Y+WCiAgaWYgKGNvZGUgIT0gMjAwKSB7CiAgICAvLyDphY3nva7liY3nq6/phY3nva7nmoRlcnLmmKDlsITooagKICAgIGlmIChjb2RlTWFwLmhhcyhjb2RlKSkgewogICAgICAvLyBbZXJyTWVzc2FnZSwgdG8/XQogICAgICBjb25zdCBbZXJyTWVzc2FnZSwgdG9dID0gY29kZU1hcC5nZXQoY29kZSk7CiAgICAgIF9NZXNzYWdlLmVycm9yKGVyck1lc3NhZ2UpOwoKICAgICAgLy8g5aaC5p6c6ZyA6KaB6Lez6L2sCiAgICAgIGlmICh0byAhPSAiIikgewogICAgICAgIGlmICh0byA9PSAiL2xvZ2luIikgewogICAgICAgICAgLyoqDQogICAgICAgICAgICog6Lez6L2s5YmNIOWFiOaKimxvY2FsU3RvcmFnZeS4reWFs+S6jueUqOaIt+eahOS/oeaBr+WFiOWIoOmZpA0KICAgICAgICAgICAqIOWboOS4uuWcqHJvdXRlci5iZWZvcmVFYWNo5oum5oiq5LqG5YWz5LqO55So5oi35pyJbG9jYWxTdG9yYWdl55qE5L+h5oGv5peg5rOV6Lez6L2s55m75b2V5ZKM5rOo5YaM6aG16Z2iDQogICAgICAgICAgICovCiAgICAgICAgICBsb2dvdXQoKTsKICAgICAgICB9CiAgICAgICAgcm91dGVyLnB1c2godG8pOwogICAgICB9CiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJNZXNzYWdlKTsKICAgIH0KCiAgICAvLyB0b2tlbui/h+acn+WkhOeQhgogICAgaWYgKGNvZGUgPT09IDcwMDA0KSB7CiAgICAgIHJldHVybiBoYW5kbGVFeHBpcmVkVG9rZW4ocmVzKTsKICAgIH0KICAgIF9NZXNzYWdlLmVycm9yKG1lc3NhZ2UpOwogICAgLy8g6L+U5ZuecmVqZWN0IOS4jei/m+WFpeWIsOS4muWKoeS4reeahHRoZW7lh73mlbDlm57osIPkuK0KICAgIHJldHVybiBQcm9taXNlLnJlamVjdChtZXNzYWdlKTsKICB9IGVsc2UgewogICAgcmV0dXJuIHJlcy5kYXRhOwogIH0KfQppbnN0YW5jZS5pbnRlcmNlcHRvcnMucmVzcG9uc2UudXNlKHJlc3BvbnNlU3VjY2Vzc0hhbmRsZXIsIGVyciA9PiB7CiAgLy8g5YWz6Zet6L+b5bqm5p2hCiAgTlByb2dyZXNzLmRvbmUoKTsKICAvLyDlj6rmnIlyZWZyZWhUb2tlbui/h+acn+aJjeS8muadpeWIsOi/me+8jHRva2Vu6L+H5pyf5Y+q5Lya6L+U5Zue5a+55bqU55qE5ZON5bqU56CB77yMcmVmcmVzaFRva2Vu6L+H5pyf5YiZ5piv5pyN5Yqh5Zmo5ZON5bqUCiAgaWYgKGVyci5yZXNwb25zZS5zdGF0dXMgPT09IDQwMSkgewogICAgX01lc3NhZ2Uud2FybmluZygi55m75b2V5oCB5bey6L+H5pyf77yM6K+36YeN5paw55m76ZmGIik7CiAgICAvKioNCiAgICAgKiDot7PovazliY0g5YWI5oqKbG9jYWxTdG9yYWdl5Lit5YWz5LqO55So5oi355qE5L+h5oGv5YWI5Yig6ZmkDQogICAgICog5Zug5Li65Zyocm91dGVyLmJlZm9yZUVhY2jmi6bmiKrkuoblhbPkuo7nlKjmiLfmnIlsb2NhbFN0b3JhZ2XnmoTkv6Hmga/ml6Dms5Xot7PovaznmbvlvZXlkozms6jlhozpobXpnaINCiAgICAgKi8KICAgIGxvZ291dCgpOwogICAgcm91dGVyLnB1c2goIi9sb2dpbiIpOwogICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycik7CiAgfQogIGxldCBlcnJNZXNzYWdlID0gZXJyLnJlc3BvbnNlLmRhdGEubWVzc2FnZTsKICBpZiAoZXJyLnJlc3BvbnNlLmRhdGEubWVzc2FnZSA9PSB1bmRlZmluZWQpIHsKICAgIGVyck1lc3NhZ2UgPSAi6K+35qOA5p+l572R57uc5piv5ZCm6L+e5o6lIjsKICB9CiAgX01lc3NhZ2UuZXJyb3IoZXJyTWVzc2FnZSk7CiAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycik7Cn0pOwpleHBvcnQgZGVmYXVsdCBpbnN0YW5jZTs="},{"version":3,"names":["axios","codeMap","router","logout","isJSON","refreshTokenApi","NProgress","configure","showSpinner","instance","create","baseURL","process","env","VUE_APP_SERVER_URL","timeout","generateAuthorizationHeader","config","token","localStorage","getItem","headers","Authorization","JSON","parse","isRefreshing","subscribers","handleExpiredToken","res","refreshTokenRequst","data","retryOriginalRequest","Promise","resolve","addSubscriber","onAccessTokenFetched","forEach","callback","push","refreshToken","userInfo","loginInfo","userId","userid","then","setItem","stringify","interceptors","request","use","start","err","_Message","error","reject","responseSuccessHandler","done","code","message","has","errMessage","to","get","response","status","warning","undefined"],"sources":["D:/2718075060/Desk/sspku/云计算/Note/note-front/src/network/index.js"],"sourcesContent":["import axios from \"axios\";\r\nimport { Message } from \"element-ui\";\r\nimport codeMap from \"./ResultCode\";\r\nimport router from \"@/router\";\r\nimport { logout } from \"@/utils/userUtil.js\";\r\nimport { isJSON } from \"@/utils/jsonUtil.js\";\r\nimport { refreshTokenApi } from \"./login/index\";\r\nimport NProgress from \"nprogress\";\r\nimport \"nprogress/nprogress.css\";\r\n\r\nNProgress.configure({ showSpinner: false }); // 关闭进度条圆环\r\n\r\nconst instance = axios.create({\r\n  baseURL: process.env.VUE_APP_SERVER_URL,\r\n  timeout: 10000,\r\n});\r\n\r\n/**\r\n * 根据localStorage中的token生成对应后端响应的请求头\r\n * @param {*} config\r\n */\r\nfunction generateAuthorizationHeader(config) {\r\n  const token = localStorage.getItem(\"token\");\r\n  if (token) {\r\n    config.headers.Authorization = `Bearer ${JSON.parse(token)}`;\r\n  }\r\n\r\n  return config;\r\n}\r\n\r\nlet isRefreshing = true;\r\nlet subscribers = [];\r\n\r\nfunction handleExpiredToken(res) {\r\n  // 刷新token的函数,这需要添加一个开关，防止重复请求\r\n  if (isRefreshing) {\r\n    refreshTokenRequst();\r\n  }\r\n  isRefreshing = false;\r\n\r\n  // 因为请求体中有数据，然后token失效之后，收集这个失败的请求，这个时候请求体的数据就会变成json格式，会影响到接口\r\n  if (isJSON(res.config.data)) {\r\n    res.config.data = JSON.parse(res.config.data);\r\n  }\r\n  // 这个Promise函数很关键\r\n  const retryOriginalRequest = new Promise((resolve) => {\r\n    addSubscriber(() => {\r\n      resolve(instance(res.config));\r\n    });\r\n  });\r\n  return retryOriginalRequest;\r\n}\r\n\r\n// 遍历执行需要执行的函数\r\nfunction onAccessTokenFetched() {\r\n  subscribers.forEach((callback) => {\r\n    callback();\r\n  });\r\n  subscribers = [];\r\n}\r\n\r\n// 收集需要执行的函数\r\nfunction addSubscriber(callback) {\r\n  subscribers.push(callback);\r\n}\r\n\r\nfunction refreshTokenRequst() {\r\n  const refreshToken = JSON.parse(localStorage.getItem(\"refreshToken\"));\r\n  const userInfo = JSON.parse(localStorage.getItem(\"userInfo\"));\r\n  refreshTokenApi({\r\n    loginInfo: {\r\n      userId: userInfo.userid,\r\n    },\r\n    refreshToken: refreshToken,\r\n  }).then((res) => {\r\n    localStorage.setItem(\"refreshToken\", JSON.stringify(res.data.refreshToken));\r\n    localStorage.setItem(\"token\", JSON.stringify(res.data.token));\r\n    onAccessTokenFetched();\r\n    isRefreshing = true;\r\n  });\r\n}\r\n\r\n// request intercep\r\ninstance.interceptors.request.use(\r\n  (config) => {\r\n    // 开启进度条\r\n    NProgress.start();\r\n    // 添加请求头，里面放入与服务器约定好的格式\r\n    return generateAuthorizationHeader(config);\r\n  },\r\n  (err) => {\r\n    Message.error(err);\r\n\r\n    return Promise.reject(err);\r\n  }\r\n);\r\n\r\nfunction responseSuccessHandler(res) {\r\n  // 关闭进度条\r\n  NProgress.done();\r\n\r\n  const code = res.data.code;\r\n  const message = res.data.message;\r\n\r\n  // 错误信息都从接口获取\r\n  if (code != 200) {\r\n    // 配置前端配置的err映射表\r\n    if (codeMap.has(code)) {\r\n      // [errMessage, to?]\r\n      const [errMessage, to] = codeMap.get(code);\r\n      Message.error(errMessage);\r\n\r\n      // 如果需要跳转\r\n      if (to != \"\") {\r\n        if (to == \"/login\") {\r\n          /**\r\n           * 跳转前 先把localStorage中关于用户的信息先删除\r\n           * 因为在router.beforeEach拦截了关于用户有localStorage的信息无法跳转登录和注册页面\r\n           */\r\n          logout();\r\n        }\r\n        router.push(to);\r\n      }\r\n      return Promise.reject(errMessage);\r\n    }\r\n\r\n    // token过期处理\r\n    if (code === 70004) {\r\n      return handleExpiredToken(res);\r\n    }\r\n\r\n    Message.error(message);\r\n    // 返回reject 不进入到业务中的then函数回调中\r\n    return Promise.reject(message);\r\n  } else {\r\n    return res.data;\r\n  }\r\n}\r\n\r\ninstance.interceptors.response.use(responseSuccessHandler, (err) => {\r\n  // 关闭进度条\r\n  NProgress.done();\r\n  // 只有refrehToken过期才会来到这，token过期只会返回对应的响应码，refreshToken过期则是服务器响应\r\n  if (err.response.status === 401) {\r\n    Message.warning(\"登录态已过期，请重新登陆\");\r\n    /**\r\n     * 跳转前 先把localStorage中关于用户的信息先删除\r\n     * 因为在router.beforeEach拦截了关于用户有localStorage的信息无法跳转登录和注册页面\r\n     */\r\n    logout();\r\n    router.push(\"/login\");\r\n\r\n    return Promise.reject(err);\r\n  }\r\n  let errMessage = err.response.data.message;\r\n  if (err.response.data.message == undefined) {\r\n    errMessage = \"请检查网络是否连接\";\r\n  }\r\n  Message.error(errMessage);\r\n  return Promise.reject(err);\r\n});\r\n\r\nexport default instance;\r\n"],"mappings":"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"}]}