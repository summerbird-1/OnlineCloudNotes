{"remainingRequest":"D:\\2718075060\\Desk\\sspku\\云计算\\Note\\note-front\\node_modules\\.store\\babel-loader@8.3.0\\node_modules\\babel-loader\\lib\\index.js!D:\\2718075060\\Desk\\sspku\\云计算\\Note\\note-front\\node_modules\\.store\\cache-loader@4.1.0\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!D:\\2718075060\\Desk\\sspku\\云计算\\Note\\note-front\\node_modules\\.store\\vue-loader@15.11.1\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\2718075060\\Desk\\sspku\\云计算\\Note\\note-front\\src\\views\\notes\\childrens\\NoteContent.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\2718075060\\Desk\\sspku\\云计算\\Note\\note-front\\src\\views\\notes\\childrens\\NoteContent.vue","mtime":1703320567684},{"path":"D:\\2718075060\\Desk\\sspku\\云计算\\Note\\note-front\\babel.config.js","mtime":1703320567604},{"path":"D:\\2718075060\\Desk\\sspku\\云计算\\Note\\note-front\\node_modules\\.store\\cache-loader@4.1.0\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\2718075060\\Desk\\sspku\\云计算\\Note\\note-front\\node_modules\\.store\\babel-loader@8.3.0\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"D:\\2718075060\\Desk\\sspku\\云计算\\Note\\note-front\\node_modules\\.store\\cache-loader@4.1.0\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\2718075060\\Desk\\sspku\\云计算\\Note\\note-front\\node_modules\\.store\\vue-loader@15.11.1\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IE5vdGVDb21tZW50Q29udGFpbmVyIGZyb20gJy4vTm90ZUNvbW1lbnRDb250YWluZXIudnVlJzsKaW1wb3J0IE5vdGUgZnJvbSAnLi9Ob3RlLnZ1ZSc7CmltcG9ydCB7IGluc2VydERpYW56YW5PbmUsIGluc2VydENvbGxlY3RPbmUsIGRlbGV0ZURpYW56YW5PbmUsIGRlbGV0ZUNvbGxlY3RPbmUgfSBmcm9tICdAL25ldHdvcmsvbm90ZS9pbmRleC5qcyc7CmV4cG9ydCBkZWZhdWx0IHsKICBwcm9wczogewogICAgY29udGVudERhdGE6IHsKICAgICAgdHlwZTogT2JqZWN0LAogICAgICBkZWZhdWx0OiAoKSA9PiB7fQogICAgfQogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGxvYWRpbmc6IHRydWUKICAgIH07CiAgfSwKICBjb21wb25lbnRzOiB7CiAgICBOb3RlQ29tbWVudENvbnRhaW5lciwKICAgIE5vdGUKICB9LAogIGNvbXB1dGVkOiB7CiAgICBjb250ZW50VGV4dCgpIHsKICAgICAgcmV0dXJuIHRoaXMuY29udGVudERhdGEgPyB0aGlzLmNvbnRlbnREYXRhLmNvbnRlbnQgOiAnJzsKICAgIH0sCiAgICBpc0xpa2UoKSB7CiAgICAgIGlmICghdGhpcy5jb250ZW50RGF0YSkgcmV0dXJuOyAvLyDmsqHmnInmlbDmja4g55u05o6lcmV0dXJuCiAgICAgIHJldHVybiB0aGlzLmNvbnRlbnREYXRhLnJlbGF0aW9uLmlzTGlrZSA9PT0gMSA/ICdhY3RpdmUnIDogJyc7CiAgICB9LAogICAgaXNDb2xsZWN0KCkgewogICAgICByZXR1cm4gdGhpcy5jb250ZW50RGF0YS5yZWxhdGlvbi5pc0NvbGxlY3QgPT09IDEgPyAnYWN0aXZlJyA6ICcnOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgaGFuZGxlRGlhblphbigpIHsKICAgICAgaWYgKCF0aGlzLmlzTG9naW4oKSkgewogICAgICAgIHRoaXMuJG1lc3NhZ2Uud2FybmluZygn6K+355m75b2V5LmL5ZCO5YaN6L+b6KGM5pON5L2cJyk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGlmICh0aGlzLmlzTGlrZSA9PT0gJycpIHsKICAgICAgICAvLyDlvZPliY3nlKjmiLfov5jmnKrnu5nov5nnr4fnrJTorrDngrnov4fotZ4KICAgICAgICBpbnNlcnREaWFuemFuT25lKHRoaXMuZ2V0RGlhblphbkR0bygpKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpOwogICAgICAgICAgLy8g5Yi35paw5pWw5o2uCiAgICAgICAgICB0aGlzLnJlbG9hZEdldERhdGEoKTsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICAvLyDlvZPliY3nlKjmiLflt7Lnu4/nu5nov5nnr4fnrJTorrDngrnov4fotZ4KICAgICAgICBkZWxldGVEaWFuemFuT25lKHRoaXMuZ2V0RGlhblphbkR0bygpKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpOwogICAgICAgICAgLy8g5Yi35paw5pWw5o2uCiAgICAgICAgICB0aGlzLnJlbG9hZEdldERhdGEoKTsKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIGhhbmRsZUNvbGxlY3QoKSB7CiAgICAgIGlmICghdGhpcy5pc0xvZ2luKCkpIHsKICAgICAgICB0aGlzLiRtZXNzYWdlLndhcm5pbmcoJ+ivt+eZu+W9leS5i+WQjuWGjei/m+ihjOaTjeS9nCcpOwogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBpZiAodGhpcy5pc0NvbGxlY3QgPT09ICcnKSB7CiAgICAgICAgLy8g5b2T5YmN55So5oi36L+Y5pyq57uZ6L+Z56+H56yU6K6w54K56L+H6LWeCiAgICAgICAgaW5zZXJ0Q29sbGVjdE9uZSh0aGlzLmdldERpYW5aYW5EdG8oKSkudGhlbihyZXMgPT4gewogICAgICAgICAgY29uc29sZS5sb2cocmVzKTsKICAgICAgICAgIC8vIOWIt+aWsOaVsOaNrgogICAgICAgICAgdGhpcy5yZWxvYWRHZXREYXRhKCk7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8g5b2T5YmN55So5oi35bey57uP57uZ6L+Z56+H56yU6K6w54K56L+H6LWeCiAgICAgICAgZGVsZXRlQ29sbGVjdE9uZSh0aGlzLmdldERpYW5aYW5EdG8oKSkudGhlbihyZXMgPT4gewogICAgICAgICAgY29uc29sZS5sb2cocmVzKTsKICAgICAgICAgIC8vIOWIt+aWsOaVsOaNrgogICAgICAgICAgdGhpcy5yZWxvYWRHZXREYXRhKCk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBpc0xvZ2luKCkgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUudXNlckluZm8gIT09IG51bGw7CiAgICB9LAogICAgLy8g54i257uE5Lu26YeN5paw5ou/5pWw5o2uCiAgICByZWxvYWRHZXREYXRhKCkgewogICAgICB0aGlzLiRlbWl0KCdyZWxvYWRHZXREYXRhJyk7CiAgICB9LAogICAgZ2V0RGlhblphbkR0bygpIHsKICAgICAgY29uc3Qgb2JqID0gewogICAgICAgIHVzZXJJZDogdGhpcy4kc3RvcmUuc3RhdGUudXNlckluZm8udXNlcmlkLAogICAgICAgIG5vdGVJZDogdGhpcy4kcm91dGUucXVlcnkuaWQKICAgICAgfTsKICAgICAgcmV0dXJuIG9iajsKICAgIH0KICB9LAogIHdhdGNoOiB7CiAgICBjb250ZW50RGF0YSgpIHsKICAgICAgLy8g6Ziy5q2i6aG16Z2i6Zeq5YqoCiAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOwogICAgICB9LCAzMDApOwogICAgfQogIH0KfTs="},{"version":3,"names":["NoteCommentContainer","Note","insertDianzanOne","insertCollectOne","deleteDianzanOne","deleteCollectOne","props","contentData","type","Object","default","data","loading","components","computed","contentText","content","isLike","relation","isCollect","methods","handleDianZan","isLogin","$message","warning","getDianZanDto","then","res","console","log","reloadGetData","handleCollect","$store","state","userInfo","$emit","obj","userId","userid","noteId","$route","query","id","watch","setTimeout"],"sources":["src/views/notes/childrens/NoteContent.vue"],"sourcesContent":["<template>\r\n  <div class=\"note-content\" ref=\"contentRef\">\r\n    <!-- <el-scrollbar class=\"scrollbar\"> -->\r\n    <div class=\"scrollbar-wrap\">\r\n      <el-skeleton :loading=\"loading\" animated>\r\n        <template v-if=\"contentData\">\r\n          <div class=\"header\">{{ contentData.title }}</div>\r\n          <div class=\"note-detail\">\r\n            <span>{{ contentData.tag }}</span>\r\n            <span>{{ contentData.createdTime }}</span>\r\n            <span :class=\"isLike\">\r\n              {{ contentData.likeNum }}\r\n              <i\r\n                class=\"iconfont icon-dianzan dianzan\"\r\n                @click=\"handleDianZan\"\r\n              ></i>\r\n            </span>\r\n            <span :class=\"isCollect\">\r\n              {{ contentData.collectNum }}\r\n              <i\r\n                class=\"iconfont icon-jiaxingshoucang jiaxingshoucang\"\r\n                @click=\"handleCollect\"\r\n              ></i>\r\n            </span>\r\n          </div>\r\n          <div class=\"author\">\r\n            <el-avatar :size=\"28\" :src=\"contentData.user.avatarUrl\">\r\n            </el-avatar>\r\n            <span>{{ contentData.user.userid }}</span>\r\n            <div class=\"grade\">LV 1</div>\r\n          </div>\r\n        </template>\r\n        <template slot=\"template\">\r\n          <div style=\"text-align: center\">\r\n            <el-skeleton-item\r\n              class=\"note-content-skeleton-title\"\r\n              variant=\"h1\"\r\n            />\r\n            <div class=\"note-content-skeleton-note-detail\">\r\n              <el-skeleton-item\r\n                variant=\"text\"\r\n                style=\"margin-right: 20px; width: 50px\"\r\n              />\r\n              <el-skeleton-item\r\n                variant=\"text\"\r\n                style=\"margin-right: 20px; width: 150px\"\r\n              />\r\n              <el-skeleton-item\r\n                variant=\"text\"\r\n                style=\"margin-right: 20px; width: 30px\"\r\n              />\r\n              <el-skeleton-item\r\n                variant=\"text\"\r\n                style=\"margin-right: 20px; width: 30px\"\r\n              />\r\n            </div>\r\n            <div class=\"note-content-skeleton-author\">\r\n              <el-skeleton-item\r\n                variant=\"image\"\r\n                style=\"margin-right: 10px; width: 32px; height: 32px\"\r\n              />\r\n              <el-skeleton-item\r\n                variant=\"text\"\r\n                style=\"margin-right: 5px; width: 60px\"\r\n              />\r\n              <el-skeleton-item variant=\"text\" style=\"width: 40px\" />\r\n            </div>\r\n          </div>\r\n        </template>\r\n      </el-skeleton>\r\n\r\n      <div class=\"notes\"><Note :contentText=\"contentText\" /></div>\r\n\r\n      <div class=\"like\">\r\n        <i\r\n          class=\"iconfont icon-dianzan dianzan\"\r\n          :class=\"isLike\"\r\n          @click=\"handleDianZan\"\r\n        ></i>\r\n        <span v-if=\"!isLike\">Click Here if You Like It</span>\r\n        <span v-else>Liked</span>\r\n      </div>\r\n      <div class=\"comment\">\r\n        <NoteCommentContainer />\r\n      </div>\r\n    </div>\r\n    <!-- </el-scrollbar> -->\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport NoteCommentContainer from './NoteCommentContainer.vue';\r\nimport Note from './Note.vue';\r\nimport {\r\n  insertDianzanOne,\r\n  insertCollectOne,\r\n  deleteDianzanOne,\r\n  deleteCollectOne,\r\n} from '@/network/note/index.js';\r\n\r\nexport default {\r\n  props: {\r\n    contentData: {\r\n      type: Object,\r\n      default: () => {},\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      loading: true,\r\n    };\r\n  },\r\n  components: { NoteCommentContainer, Note },\r\n  computed: {\r\n    contentText() {\r\n      return this.contentData ? this.contentData.content : '';\r\n    },\r\n    isLike() {\r\n      if (!this.contentData) return; // 没有数据 直接return\r\n      return this.contentData.relation.isLike === 1 ? 'active' : '';\r\n    },\r\n    isCollect() {\r\n      return this.contentData.relation.isCollect === 1 ? 'active' : '';\r\n    },\r\n  },\r\n  methods: {\r\n    handleDianZan() {\r\n      if (!this.isLogin()) {\r\n        this.$message.warning('请登录之后再进行操作');\r\n        return;\r\n      }\r\n      if (this.isLike === '') {\r\n        // 当前用户还未给这篇笔记点过赞\r\n        insertDianzanOne(this.getDianZanDto()).then((res) => {\r\n          console.log(res);\r\n          // 刷新数据\r\n          this.reloadGetData();\r\n        });\r\n      } else {\r\n        // 当前用户已经给这篇笔记点过赞\r\n        deleteDianzanOne(this.getDianZanDto()).then((res) => {\r\n          console.log(res);\r\n          // 刷新数据\r\n          this.reloadGetData();\r\n        });\r\n      }\r\n    },\r\n    handleCollect() {\r\n      if (!this.isLogin()) {\r\n        this.$message.warning('请登录之后再进行操作');\r\n        return;\r\n      }\r\n      if (this.isCollect === '') {\r\n        // 当前用户还未给这篇笔记点过赞\r\n        insertCollectOne(this.getDianZanDto()).then((res) => {\r\n          console.log(res);\r\n          // 刷新数据\r\n          this.reloadGetData();\r\n        });\r\n      } else {\r\n        // 当前用户已经给这篇笔记点过赞\r\n        deleteCollectOne(this.getDianZanDto()).then((res) => {\r\n          console.log(res);\r\n          // 刷新数据\r\n          this.reloadGetData();\r\n        });\r\n      }\r\n    },\r\n    isLogin() {\r\n      return this.$store.state.userInfo !== null;\r\n    },\r\n    // 父组件重新拿数据\r\n    reloadGetData() {\r\n      this.$emit('reloadGetData');\r\n    },\r\n    getDianZanDto() {\r\n      const obj = {\r\n        userId: this.$store.state.userInfo.userid,\r\n        noteId: this.$route.query.id,\r\n      };\r\n      return obj;\r\n    },\r\n  },\r\n  watch: {\r\n    contentData() {\r\n      // 防止页面闪动\r\n      setTimeout(() => {\r\n        this.loading = false;\r\n      }, 300);\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\">\r\n.note-content {\r\n  flex: 1;\r\n  background: #fff;\r\n  border-radius: 5px;\r\n  border: 1px solid #dcdcdc;\r\n  border-bottom: none;\r\n  // 解决flex：1被撑开导致滚动条显示异常\r\n  // overflow-y: hidden;\r\n\r\n  // .scrollbar {\r\n  // height: 100%;\r\n\r\n  // 隐藏横向滚动条\r\n  // & > .el-scrollbar__wrap {\r\n  //   overflow-x: hidden;\r\n  // }\r\n\r\n  .scrollbar-wrap {\r\n    padding: 20px 90px;\r\n\r\n    .note-content-skeleton-title {\r\n      width: 40%;\r\n      margin: auto;\r\n      margin-bottom: 10px;\r\n    }\r\n    .note-content-skeleton-note-detail {\r\n      display: flex;\r\n      justify-content: flex-start;\r\n    }\r\n    .note-content-skeleton-author {\r\n      display: flex;\r\n      justify-content: flex-start;\r\n      align-items: center;\r\n      margin-top: 10px;\r\n    }\r\n\r\n    .header {\r\n      font-size: 20px;\r\n      text-align: center;\r\n      margin-bottom: 10px;\r\n    }\r\n\r\n    .note-detail {\r\n      color: #b7b7b7;\r\n      font-size: 14px;\r\n      display: flex;\r\n      align-items: center;\r\n      // padding-left: 20px;\r\n\r\n      .active {\r\n        color: #409eff;\r\n      }\r\n\r\n      & > span {\r\n        margin-right: 20px;\r\n\r\n        .dianzan {\r\n          font-size: 14px;\r\n          user-select: none;\r\n          &:hover {\r\n            cursor: pointer;\r\n          }\r\n        }\r\n\r\n        .jiaxingshoucang {\r\n          font-size: 14px;\r\n          font-weight: bold;\r\n          user-select: none;\r\n          &:hover {\r\n            cursor: pointer;\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    .author {\r\n      display: flex;\r\n      align-items: center;\r\n      margin: 10px 0px;\r\n\r\n      & > span {\r\n        font-size: 13px;\r\n        margin: 0px 5px;\r\n      }\r\n\r\n      .grade {\r\n        background: #ea3869;\r\n        color: #fff;\r\n        font-size: 12px;\r\n        border-radius: 2px;\r\n        padding: 2px 1px;\r\n      }\r\n    }\r\n\r\n    .like {\r\n      display: flex;\r\n      align-items: center;\r\n      justify-content: center;\r\n      padding: 8px 0px;\r\n\r\n      color: #bbbbbb;\r\n      .active {\r\n        color: #409eff;\r\n      }\r\n      .dianzan {\r\n        font-size: 20px;\r\n        margin-right: 20px;\r\n        user-select: none;\r\n        &:hover {\r\n          cursor: pointer;\r\n        }\r\n      }\r\n      font-size: 13px;\r\n    }\r\n    .comment {\r\n      background: #fafbfd;\r\n    }\r\n  }\r\n  // }\r\n}\r\n</style>\r\n"],"mappings":"AA2FA,OAAAA,oBAAA;AACA,OAAAC,IAAA;AACA,SACAC,gBAAA,EACAC,gBAAA,EACAC,gBAAA,EACAC,gBAAA,QACA;AAEA;EACAC,KAAA;IACAC,WAAA;MACAC,IAAA,EAAAC,MAAA;MACAC,OAAA,EAAAA,CAAA;IACA;EACA;EACAC,KAAA;IACA;MACAC,OAAA;IACA;EACA;EACAC,UAAA;IAAAb,oBAAA;IAAAC;EAAA;EACAa,QAAA;IACAC,YAAA;MACA,YAAAR,WAAA,QAAAA,WAAA,CAAAS,OAAA;IACA;IACAC,OAAA;MACA,UAAAV,WAAA;MACA,YAAAA,WAAA,CAAAW,QAAA,CAAAD,MAAA;IACA;IACAE,UAAA;MACA,YAAAZ,WAAA,CAAAW,QAAA,CAAAC,SAAA;IACA;EACA;EACAC,OAAA;IACAC,cAAA;MACA,UAAAC,OAAA;QACA,KAAAC,QAAA,CAAAC,OAAA;QACA;MACA;MACA,SAAAP,MAAA;QACA;QACAf,gBAAA,MAAAuB,aAAA,IAAAC,IAAA,CAAAC,GAAA;UACAC,OAAA,CAAAC,GAAA,CAAAF,GAAA;UACA;UACA,KAAAG,aAAA;QACA;MACA;QACA;QACA1B,gBAAA,MAAAqB,aAAA,IAAAC,IAAA,CAAAC,GAAA;UACAC,OAAA,CAAAC,GAAA,CAAAF,GAAA;UACA;UACA,KAAAG,aAAA;QACA;MACA;IACA;IACAC,cAAA;MACA,UAAAT,OAAA;QACA,KAAAC,QAAA,CAAAC,OAAA;QACA;MACA;MACA,SAAAL,SAAA;QACA;QACAhB,gBAAA,MAAAsB,aAAA,IAAAC,IAAA,CAAAC,GAAA;UACAC,OAAA,CAAAC,GAAA,CAAAF,GAAA;UACA;UACA,KAAAG,aAAA;QACA;MACA;QACA;QACAzB,gBAAA,MAAAoB,aAAA,IAAAC,IAAA,CAAAC,GAAA;UACAC,OAAA,CAAAC,GAAA,CAAAF,GAAA;UACA;UACA,KAAAG,aAAA;QACA;MACA;IACA;IACAR,QAAA;MACA,YAAAU,MAAA,CAAAC,KAAA,CAAAC,QAAA;IACA;IACA;IACAJ,cAAA;MACA,KAAAK,KAAA;IACA;IACAV,cAAA;MACA,MAAAW,GAAA;QACAC,MAAA,OAAAL,MAAA,CAAAC,KAAA,CAAAC,QAAA,CAAAI,MAAA;QACAC,MAAA,OAAAC,MAAA,CAAAC,KAAA,CAAAC;MACA;MACA,OAAAN,GAAA;IACA;EACA;EACAO,KAAA;IACApC,YAAA;MACA;MACAqC,UAAA;QACA,KAAAhC,OAAA;MACA;IACA;EACA;AACA"}]}