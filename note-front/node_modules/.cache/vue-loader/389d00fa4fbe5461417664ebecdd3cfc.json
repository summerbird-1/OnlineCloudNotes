{"remainingRequest":"D:\\2718075060\\Desk\\sspku\\云计算\\Note\\note-front\\node_modules\\.store\\vue-loader@15.11.1\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\2718075060\\Desk\\sspku\\云计算\\Note\\note-front\\src\\views\\notes\\childrens\\NoteContent.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\2718075060\\Desk\\sspku\\云计算\\Note\\note-front\\src\\views\\notes\\childrens\\NoteContent.vue","mtime":1703320567684},{"path":"D:\\2718075060\\Desk\\sspku\\云计算\\Note\\note-front\\node_modules\\.store\\cache-loader@4.1.0\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\2718075060\\Desk\\sspku\\云计算\\Note\\note-front\\node_modules\\.store\\babel-loader@8.3.0\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"D:\\2718075060\\Desk\\sspku\\云计算\\Note\\note-front\\node_modules\\.store\\cache-loader@4.1.0\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\2718075060\\Desk\\sspku\\云计算\\Note\\note-front\\node_modules\\.store\\vue-loader@15.11.1\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgTm90ZUNvbW1lbnRDb250YWluZXIgZnJvbSAnLi9Ob3RlQ29tbWVudENvbnRhaW5lci52dWUnOw0KaW1wb3J0IE5vdGUgZnJvbSAnLi9Ob3RlLnZ1ZSc7DQppbXBvcnQgew0KICBpbnNlcnREaWFuemFuT25lLA0KICBpbnNlcnRDb2xsZWN0T25lLA0KICBkZWxldGVEaWFuemFuT25lLA0KICBkZWxldGVDb2xsZWN0T25lLA0KfSBmcm9tICdAL25ldHdvcmsvbm90ZS9pbmRleC5qcyc7DQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgcHJvcHM6IHsNCiAgICBjb250ZW50RGF0YTogew0KICAgICAgdHlwZTogT2JqZWN0LA0KICAgICAgZGVmYXVsdDogKCkgPT4ge30sDQogICAgfSwNCiAgfSwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgbG9hZGluZzogdHJ1ZSwNCiAgICB9Ow0KICB9LA0KICBjb21wb25lbnRzOiB7IE5vdGVDb21tZW50Q29udGFpbmVyLCBOb3RlIH0sDQogIGNvbXB1dGVkOiB7DQogICAgY29udGVudFRleHQoKSB7DQogICAgICByZXR1cm4gdGhpcy5jb250ZW50RGF0YSA/IHRoaXMuY29udGVudERhdGEuY29udGVudCA6ICcnOw0KICAgIH0sDQogICAgaXNMaWtlKCkgew0KICAgICAgaWYgKCF0aGlzLmNvbnRlbnREYXRhKSByZXR1cm47IC8vIOayoeacieaVsOaNriDnm7TmjqVyZXR1cm4NCiAgICAgIHJldHVybiB0aGlzLmNvbnRlbnREYXRhLnJlbGF0aW9uLmlzTGlrZSA9PT0gMSA/ICdhY3RpdmUnIDogJyc7DQogICAgfSwNCiAgICBpc0NvbGxlY3QoKSB7DQogICAgICByZXR1cm4gdGhpcy5jb250ZW50RGF0YS5yZWxhdGlvbi5pc0NvbGxlY3QgPT09IDEgPyAnYWN0aXZlJyA6ICcnOw0KICAgIH0sDQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBoYW5kbGVEaWFuWmFuKCkgew0KICAgICAgaWYgKCF0aGlzLmlzTG9naW4oKSkgew0KICAgICAgICB0aGlzLiRtZXNzYWdlLndhcm5pbmcoJ+ivt+eZu+W9leS5i+WQjuWGjei/m+ihjOaTjeS9nCcpOw0KICAgICAgICByZXR1cm47DQogICAgICB9DQogICAgICBpZiAodGhpcy5pc0xpa2UgPT09ICcnKSB7DQogICAgICAgIC8vIOW9k+WJjeeUqOaIt+i/mOacque7mei/meevh+eslOiusOeCuei/h+i1ng0KICAgICAgICBpbnNlcnREaWFuemFuT25lKHRoaXMuZ2V0RGlhblphbkR0bygpKS50aGVuKChyZXMpID0+IHsNCiAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpOw0KICAgICAgICAgIC8vIOWIt+aWsOaVsOaNrg0KICAgICAgICAgIHRoaXMucmVsb2FkR2V0RGF0YSgpOw0KICAgICAgICB9KTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIC8vIOW9k+WJjeeUqOaIt+W3sue7j+e7mei/meevh+eslOiusOeCuei/h+i1ng0KICAgICAgICBkZWxldGVEaWFuemFuT25lKHRoaXMuZ2V0RGlhblphbkR0bygpKS50aGVuKChyZXMpID0+IHsNCiAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpOw0KICAgICAgICAgIC8vIOWIt+aWsOaVsOaNrg0KICAgICAgICAgIHRoaXMucmVsb2FkR2V0RGF0YSgpOw0KICAgICAgICB9KTsNCiAgICAgIH0NCiAgICB9LA0KICAgIGhhbmRsZUNvbGxlY3QoKSB7DQogICAgICBpZiAoIXRoaXMuaXNMb2dpbigpKSB7DQogICAgICAgIHRoaXMuJG1lc3NhZ2Uud2FybmluZygn6K+355m75b2V5LmL5ZCO5YaN6L+b6KGM5pON5L2cJyk7DQogICAgICAgIHJldHVybjsNCiAgICAgIH0NCiAgICAgIGlmICh0aGlzLmlzQ29sbGVjdCA9PT0gJycpIHsNCiAgICAgICAgLy8g5b2T5YmN55So5oi36L+Y5pyq57uZ6L+Z56+H56yU6K6w54K56L+H6LWeDQogICAgICAgIGluc2VydENvbGxlY3RPbmUodGhpcy5nZXREaWFuWmFuRHRvKCkpLnRoZW4oKHJlcykgPT4gew0KICAgICAgICAgIGNvbnNvbGUubG9nKHJlcyk7DQogICAgICAgICAgLy8g5Yi35paw5pWw5o2uDQogICAgICAgICAgdGhpcy5yZWxvYWRHZXREYXRhKCk7DQogICAgICAgIH0pOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgLy8g5b2T5YmN55So5oi35bey57uP57uZ6L+Z56+H56yU6K6w54K56L+H6LWeDQogICAgICAgIGRlbGV0ZUNvbGxlY3RPbmUodGhpcy5nZXREaWFuWmFuRHRvKCkpLnRoZW4oKHJlcykgPT4gew0KICAgICAgICAgIGNvbnNvbGUubG9nKHJlcyk7DQogICAgICAgICAgLy8g5Yi35paw5pWw5o2uDQogICAgICAgICAgdGhpcy5yZWxvYWRHZXREYXRhKCk7DQogICAgICAgIH0pOw0KICAgICAgfQ0KICAgIH0sDQogICAgaXNMb2dpbigpIHsNCiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS51c2VySW5mbyAhPT0gbnVsbDsNCiAgICB9LA0KICAgIC8vIOeItue7hOS7tumHjeaWsOaLv+aVsOaNrg0KICAgIHJlbG9hZEdldERhdGEoKSB7DQogICAgICB0aGlzLiRlbWl0KCdyZWxvYWRHZXREYXRhJyk7DQogICAgfSwNCiAgICBnZXREaWFuWmFuRHRvKCkgew0KICAgICAgY29uc3Qgb2JqID0gew0KICAgICAgICB1c2VySWQ6IHRoaXMuJHN0b3JlLnN0YXRlLnVzZXJJbmZvLnVzZXJpZCwNCiAgICAgICAgbm90ZUlkOiB0aGlzLiRyb3V0ZS5xdWVyeS5pZCwNCiAgICAgIH07DQogICAgICByZXR1cm4gb2JqOw0KICAgIH0sDQogIH0sDQogIHdhdGNoOiB7DQogICAgY29udGVudERhdGEoKSB7DQogICAgICAvLyDpmLLmraLpobXpnaLpl6rliqgNCiAgICAgIHNldFRpbWVvdXQoKCkgPT4gew0KICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsNCiAgICAgIH0sIDMwMCk7DQogICAgfSwNCiAgfSwNCn07DQo="},{"version":3,"sources":["NoteContent.vue"],"names":[],"mappings":";AA2FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"NoteContent.vue","sourceRoot":"src/views/notes/childrens","sourcesContent":["<template>\r\n  <div class=\"note-content\" ref=\"contentRef\">\r\n    <!-- <el-scrollbar class=\"scrollbar\"> -->\r\n    <div class=\"scrollbar-wrap\">\r\n      <el-skeleton :loading=\"loading\" animated>\r\n        <template v-if=\"contentData\">\r\n          <div class=\"header\">{{ contentData.title }}</div>\r\n          <div class=\"note-detail\">\r\n            <span>{{ contentData.tag }}</span>\r\n            <span>{{ contentData.createdTime }}</span>\r\n            <span :class=\"isLike\">\r\n              {{ contentData.likeNum }}\r\n              <i\r\n                class=\"iconfont icon-dianzan dianzan\"\r\n                @click=\"handleDianZan\"\r\n              ></i>\r\n            </span>\r\n            <span :class=\"isCollect\">\r\n              {{ contentData.collectNum }}\r\n              <i\r\n                class=\"iconfont icon-jiaxingshoucang jiaxingshoucang\"\r\n                @click=\"handleCollect\"\r\n              ></i>\r\n            </span>\r\n          </div>\r\n          <div class=\"author\">\r\n            <el-avatar :size=\"28\" :src=\"contentData.user.avatarUrl\">\r\n            </el-avatar>\r\n            <span>{{ contentData.user.userid }}</span>\r\n            <div class=\"grade\">LV 1</div>\r\n          </div>\r\n        </template>\r\n        <template slot=\"template\">\r\n          <div style=\"text-align: center\">\r\n            <el-skeleton-item\r\n              class=\"note-content-skeleton-title\"\r\n              variant=\"h1\"\r\n            />\r\n            <div class=\"note-content-skeleton-note-detail\">\r\n              <el-skeleton-item\r\n                variant=\"text\"\r\n                style=\"margin-right: 20px; width: 50px\"\r\n              />\r\n              <el-skeleton-item\r\n                variant=\"text\"\r\n                style=\"margin-right: 20px; width: 150px\"\r\n              />\r\n              <el-skeleton-item\r\n                variant=\"text\"\r\n                style=\"margin-right: 20px; width: 30px\"\r\n              />\r\n              <el-skeleton-item\r\n                variant=\"text\"\r\n                style=\"margin-right: 20px; width: 30px\"\r\n              />\r\n            </div>\r\n            <div class=\"note-content-skeleton-author\">\r\n              <el-skeleton-item\r\n                variant=\"image\"\r\n                style=\"margin-right: 10px; width: 32px; height: 32px\"\r\n              />\r\n              <el-skeleton-item\r\n                variant=\"text\"\r\n                style=\"margin-right: 5px; width: 60px\"\r\n              />\r\n              <el-skeleton-item variant=\"text\" style=\"width: 40px\" />\r\n            </div>\r\n          </div>\r\n        </template>\r\n      </el-skeleton>\r\n\r\n      <div class=\"notes\"><Note :contentText=\"contentText\" /></div>\r\n\r\n      <div class=\"like\">\r\n        <i\r\n          class=\"iconfont icon-dianzan dianzan\"\r\n          :class=\"isLike\"\r\n          @click=\"handleDianZan\"\r\n        ></i>\r\n        <span v-if=\"!isLike\">Click Here if You Like It</span>\r\n        <span v-else>Liked</span>\r\n      </div>\r\n      <div class=\"comment\">\r\n        <NoteCommentContainer />\r\n      </div>\r\n    </div>\r\n    <!-- </el-scrollbar> -->\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport NoteCommentContainer from './NoteCommentContainer.vue';\r\nimport Note from './Note.vue';\r\nimport {\r\n  insertDianzanOne,\r\n  insertCollectOne,\r\n  deleteDianzanOne,\r\n  deleteCollectOne,\r\n} from '@/network/note/index.js';\r\n\r\nexport default {\r\n  props: {\r\n    contentData: {\r\n      type: Object,\r\n      default: () => {},\r\n    },\r\n  },\r\n  data() {\r\n    return {\r\n      loading: true,\r\n    };\r\n  },\r\n  components: { NoteCommentContainer, Note },\r\n  computed: {\r\n    contentText() {\r\n      return this.contentData ? this.contentData.content : '';\r\n    },\r\n    isLike() {\r\n      if (!this.contentData) return; // 没有数据 直接return\r\n      return this.contentData.relation.isLike === 1 ? 'active' : '';\r\n    },\r\n    isCollect() {\r\n      return this.contentData.relation.isCollect === 1 ? 'active' : '';\r\n    },\r\n  },\r\n  methods: {\r\n    handleDianZan() {\r\n      if (!this.isLogin()) {\r\n        this.$message.warning('请登录之后再进行操作');\r\n        return;\r\n      }\r\n      if (this.isLike === '') {\r\n        // 当前用户还未给这篇笔记点过赞\r\n        insertDianzanOne(this.getDianZanDto()).then((res) => {\r\n          console.log(res);\r\n          // 刷新数据\r\n          this.reloadGetData();\r\n        });\r\n      } else {\r\n        // 当前用户已经给这篇笔记点过赞\r\n        deleteDianzanOne(this.getDianZanDto()).then((res) => {\r\n          console.log(res);\r\n          // 刷新数据\r\n          this.reloadGetData();\r\n        });\r\n      }\r\n    },\r\n    handleCollect() {\r\n      if (!this.isLogin()) {\r\n        this.$message.warning('请登录之后再进行操作');\r\n        return;\r\n      }\r\n      if (this.isCollect === '') {\r\n        // 当前用户还未给这篇笔记点过赞\r\n        insertCollectOne(this.getDianZanDto()).then((res) => {\r\n          console.log(res);\r\n          // 刷新数据\r\n          this.reloadGetData();\r\n        });\r\n      } else {\r\n        // 当前用户已经给这篇笔记点过赞\r\n        deleteCollectOne(this.getDianZanDto()).then((res) => {\r\n          console.log(res);\r\n          // 刷新数据\r\n          this.reloadGetData();\r\n        });\r\n      }\r\n    },\r\n    isLogin() {\r\n      return this.$store.state.userInfo !== null;\r\n    },\r\n    // 父组件重新拿数据\r\n    reloadGetData() {\r\n      this.$emit('reloadGetData');\r\n    },\r\n    getDianZanDto() {\r\n      const obj = {\r\n        userId: this.$store.state.userInfo.userid,\r\n        noteId: this.$route.query.id,\r\n      };\r\n      return obj;\r\n    },\r\n  },\r\n  watch: {\r\n    contentData() {\r\n      // 防止页面闪动\r\n      setTimeout(() => {\r\n        this.loading = false;\r\n      }, 300);\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\">\r\n.note-content {\r\n  flex: 1;\r\n  background: #fff;\r\n  border-radius: 5px;\r\n  border: 1px solid #dcdcdc;\r\n  border-bottom: none;\r\n  // 解决flex：1被撑开导致滚动条显示异常\r\n  // overflow-y: hidden;\r\n\r\n  // .scrollbar {\r\n  // height: 100%;\r\n\r\n  // 隐藏横向滚动条\r\n  // & > .el-scrollbar__wrap {\r\n  //   overflow-x: hidden;\r\n  // }\r\n\r\n  .scrollbar-wrap {\r\n    padding: 20px 90px;\r\n\r\n    .note-content-skeleton-title {\r\n      width: 40%;\r\n      margin: auto;\r\n      margin-bottom: 10px;\r\n    }\r\n    .note-content-skeleton-note-detail {\r\n      display: flex;\r\n      justify-content: flex-start;\r\n    }\r\n    .note-content-skeleton-author {\r\n      display: flex;\r\n      justify-content: flex-start;\r\n      align-items: center;\r\n      margin-top: 10px;\r\n    }\r\n\r\n    .header {\r\n      font-size: 20px;\r\n      text-align: center;\r\n      margin-bottom: 10px;\r\n    }\r\n\r\n    .note-detail {\r\n      color: #b7b7b7;\r\n      font-size: 14px;\r\n      display: flex;\r\n      align-items: center;\r\n      // padding-left: 20px;\r\n\r\n      .active {\r\n        color: #409eff;\r\n      }\r\n\r\n      & > span {\r\n        margin-right: 20px;\r\n\r\n        .dianzan {\r\n          font-size: 14px;\r\n          user-select: none;\r\n          &:hover {\r\n            cursor: pointer;\r\n          }\r\n        }\r\n\r\n        .jiaxingshoucang {\r\n          font-size: 14px;\r\n          font-weight: bold;\r\n          user-select: none;\r\n          &:hover {\r\n            cursor: pointer;\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    .author {\r\n      display: flex;\r\n      align-items: center;\r\n      margin: 10px 0px;\r\n\r\n      & > span {\r\n        font-size: 13px;\r\n        margin: 0px 5px;\r\n      }\r\n\r\n      .grade {\r\n        background: #ea3869;\r\n        color: #fff;\r\n        font-size: 12px;\r\n        border-radius: 2px;\r\n        padding: 2px 1px;\r\n      }\r\n    }\r\n\r\n    .like {\r\n      display: flex;\r\n      align-items: center;\r\n      justify-content: center;\r\n      padding: 8px 0px;\r\n\r\n      color: #bbbbbb;\r\n      .active {\r\n        color: #409eff;\r\n      }\r\n      .dianzan {\r\n        font-size: 20px;\r\n        margin-right: 20px;\r\n        user-select: none;\r\n        &:hover {\r\n          cursor: pointer;\r\n        }\r\n      }\r\n      font-size: 13px;\r\n    }\r\n    .comment {\r\n      background: #fafbfd;\r\n    }\r\n  }\r\n  // }\r\n}\r\n</style>\r\n"]}]}