{"remainingRequest":"D:\\2718075060\\Desk\\sspku\\云计算\\Note\\note-front\\node_modules\\.store\\vue-loader@15.11.1\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\2718075060\\Desk\\sspku\\云计算\\Note\\note-front\\src\\views\\notes\\childrens\\NoteCommentItem.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\2718075060\\Desk\\sspku\\云计算\\Note\\note-front\\src\\views\\notes\\childrens\\NoteCommentItem.vue","mtime":1703320567682},{"path":"D:\\2718075060\\Desk\\sspku\\云计算\\Note\\note-front\\node_modules\\.store\\cache-loader@4.1.0\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\2718075060\\Desk\\sspku\\云计算\\Note\\note-front\\node_modules\\.store\\babel-loader@8.3.0\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"D:\\2718075060\\Desk\\sspku\\云计算\\Note\\note-front\\node_modules\\.store\\cache-loader@4.1.0\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\2718075060\\Desk\\sspku\\云计算\\Note\\note-front\\node_modules\\.store\\vue-loader@15.11.1\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgew0KICBhZGREaWFuemFuQ29tbWVudCwNCiAgcmVkdWNlRGlhbnphbkNvbW1lbnQsDQogIGRlbGV0ZUNvbW1lbnRCeUlkDQp9IGZyb20gJ0AvbmV0d29yay9ub3RlL2luZGV4LmpzJw0KZXhwb3J0IGRlZmF1bHQgew0KICBwcm9wczogWydpdGVtRGF0YScsICdpdGVtTGlrZScsICdpbWdTaXplJ10sDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHt9DQogIH0sDQogIGNvbXB1dGVkOiB7DQogICAgLyoqDQogICAgICog6K+laXRlbeaYr+WQpuaYr+WtkOivhOiuug0KICAgICAqLw0KICAgIGlzQ2hpbGQoKSB7DQogICAgICByZXR1cm4gdGhpcy5pdGVtRGF0YS5sZXZlbCAhPSAwDQogICAgfSwNCiAgICBpc0xpa2VkKCkgew0KICAgICAgaWYgKCF0aGlzLml0ZW1MaWtlKSByZXR1cm4gJycNCiAgICAgIHJldHVybiB0aGlzLml0ZW1MaWtlLmlzTGlrZWQgPT0gMSA/ICdhY3RpdmUnIDogJycNCiAgICB9LA0KICAgIGlzRGVsZXRlKCkgew0KICAgICAgaWYgKCF0aGlzLiRzdG9yZS5zdGF0ZS51c2VySW5mbykgew0KICAgICAgICByZXR1cm4gZmFsc2UNCiAgICAgIH0NCiAgICAgIHJldHVybiB0aGlzLml0ZW1EYXRhLnVzZXJJZCA9PT0gdGhpcy4kc3RvcmUuc3RhdGUudXNlckluZm8udXNlcmlkDQogICAgfQ0KICB9LA0KICBtZXRob2RzOiB7DQogICAgaGFuZGxlRGlhbnphbigpIHsNCiAgICAgIGlmICghdGhpcy5pc0xvZ2luKCkpIHsNCiAgICAgICAgdGhpcy4kbWVzc2FnZS53YXJuaW5nKCfor7fnmbvlvZXkuYvlkI7lho3ov5vooYzmk43kvZwnKQ0KICAgICAgICByZXR1cm4NCiAgICAgIH0NCiAgICAgIGlmICh0aGlzLml0ZW1MaWtlLmlzTGlrZWQgPT09IDApIHsNCiAgICAgICAgLy8g5b2T5YmN55So5oi36L+Y5pyq57uZ6L+Z56+H56yU6K6w54K56L+H6LWeDQogICAgICAgIGFkZERpYW56YW5Db21tZW50KHRoaXMuZ2V0RGlhblphbkR0bygpKS50aGVuKChyZXMpID0+IHsNCiAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpDQogICAgICAgICAgLy8g5Yi35paw5pWw5o2uDQogICAgICAgICAgdGhpcy5yZWxvYWRHZXREYXRhKCkNCiAgICAgICAgfSkNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIC8vIOW9k+WJjeeUqOaIt+W3sue7j+e7mei/meevh+eslOiusOeCuei/h+i1ng0KICAgICAgICByZWR1Y2VEaWFuemFuQ29tbWVudCh0aGlzLmdldERpYW5aYW5EdG8oKSkudGhlbigocmVzKSA9PiB7DQogICAgICAgICAgY29uc29sZS5sb2cocmVzKQ0KICAgICAgICAgIC8vIOWIt+aWsOaVsOaNrg0KICAgICAgICAgIHRoaXMucmVsb2FkR2V0RGF0YSgpDQogICAgICAgIH0pDQogICAgICB9DQogICAgfSwNCiAgICBoYW5kbGVSZXBseSgpIHsNCiAgICAgIHRoaXMuJGVtaXQoJ3JlcGx5VXNlcicsIHsNCiAgICAgICAgaWQ6IHRoaXMuaXRlbURhdGEuaWQsDQogICAgICAgIHVzZXJOYW1lOiB0aGlzLml0ZW1EYXRhLnVzZXJJZCwNCiAgICAgICAgcGFyZW50SWQ6IHRoaXMuaXRlbURhdGEucGFyZW50SWQsDQogICAgICAgIG5vdGVJZDogdGhpcy5pdGVtRGF0YS5ub3RlSWQNCiAgICAgIH0pDQogICAgfSwNCiAgICByZWxvYWRHZXREYXRhKCkgew0KICAgICAgdGhpcy4kZW1pdCgncmVsb2FkTGlrZURhdGEnKQ0KICAgIH0sDQogICAgaXNMb2dpbigpIHsNCiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS51c2VySW5mbyAhPT0gbnVsbA0KICAgIH0sDQogICAgZ2V0RGlhblphbkR0bygpIHsNCiAgICAgIGNvbnN0IG9iaiA9IHsNCiAgICAgICAgdXNlcklkOiB0aGlzLiRzdG9yZS5zdGF0ZS51c2VySW5mby51c2VyaWQsDQogICAgICAgIGNvbW1lbnRJZDogdGhpcy5pdGVtRGF0YS5pZA0KICAgICAgfQ0KICAgICAgcmV0dXJuIG9iag0KICAgIH0sDQogICAgZGVsZXRlQ29tbWVudCgpIHsNCiAgICAgIGRlbGV0ZUNvbW1lbnRCeUlkKHsgaWQ6IHRoaXMuaXRlbURhdGEuaWQgfSkudGhlbigoKSA9PiB7DQogICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2VzcygnZGVsZXRlIHN1Y2Nlc3MnKQ0KICAgICAgICB0aGlzLiRlbWl0KCdyZWxvYWRDb21tZW50JykNCiAgICAgIH0pDQogICAgfQ0KICB9DQp9DQo="},{"version":3,"sources":["NoteCommentItem.vue"],"names":[],"mappings":";AAyCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"NoteCommentItem.vue","sourceRoot":"src/views/notes/childrens","sourcesContent":["<template>\r\n  <div class=\"comment-item\">\r\n    <div class=\"avatar\">\r\n      <el-avatar :size=\"imgSize\" :src=\"itemData.avatarUrl\"> </el-avatar>\r\n    </div>\r\n    <div class=\"user-info\">\r\n      <div :class=\"isChild ? 'user-name child' : 'user-name'\">\r\n        <span>\r\n          {{ itemData.userId }}\r\n        </span>\r\n        <span class=\"grade\">LV {{ itemData.grade }}</span>\r\n      </div>\r\n\r\n      <div class=\"comment\" v-if=\"!isChild\">\r\n        Comments：\r\n        {{ itemData.commentContent }}\r\n      </div>\r\n      <div class=\"comment\" v-else>\r\n        Reply <span style=\"color: #79c9fc\">{{ itemData.replyUserName }}</span\r\n        >：\r\n        {{ itemData.commentContent }}\r\n      </div>\r\n\r\n      <div class=\"other-info\">\r\n        <span class=\"time\">{{ itemData.createdTime }}</span>\r\n        <span class=\"dianzan\" :class=\"isLiked\">\r\n          <i class=\"iconfont icon-dianzan dianzan\" @click=\"handleDianzan\"> </i>\r\n          {{ itemLike ? itemLike.likeNum : '' }}\r\n        </span>\r\n        <i\r\n          class=\"el-icon-delete delete-icon\"\r\n          v-if=\"isDelete\"\r\n          @click=\"deleteComment\"\r\n        ></i>\r\n        <span class=\"reply\" @click=\"handleReply\">Reply</span>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n  addDianzanComment,\r\n  reduceDianzanComment,\r\n  deleteCommentById\r\n} from '@/network/note/index.js'\r\nexport default {\r\n  props: ['itemData', 'itemLike', 'imgSize'],\r\n  data() {\r\n    return {}\r\n  },\r\n  computed: {\r\n    /**\r\n     * 该item是否是子评论\r\n     */\r\n    isChild() {\r\n      return this.itemData.level != 0\r\n    },\r\n    isLiked() {\r\n      if (!this.itemLike) return ''\r\n      return this.itemLike.isLiked == 1 ? 'active' : ''\r\n    },\r\n    isDelete() {\r\n      if (!this.$store.state.userInfo) {\r\n        return false\r\n      }\r\n      return this.itemData.userId === this.$store.state.userInfo.userid\r\n    }\r\n  },\r\n  methods: {\r\n    handleDianzan() {\r\n      if (!this.isLogin()) {\r\n        this.$message.warning('请登录之后再进行操作')\r\n        return\r\n      }\r\n      if (this.itemLike.isLiked === 0) {\r\n        // 当前用户还未给这篇笔记点过赞\r\n        addDianzanComment(this.getDianZanDto()).then((res) => {\r\n          console.log(res)\r\n          // 刷新数据\r\n          this.reloadGetData()\r\n        })\r\n      } else {\r\n        // 当前用户已经给这篇笔记点过赞\r\n        reduceDianzanComment(this.getDianZanDto()).then((res) => {\r\n          console.log(res)\r\n          // 刷新数据\r\n          this.reloadGetData()\r\n        })\r\n      }\r\n    },\r\n    handleReply() {\r\n      this.$emit('replyUser', {\r\n        id: this.itemData.id,\r\n        userName: this.itemData.userId,\r\n        parentId: this.itemData.parentId,\r\n        noteId: this.itemData.noteId\r\n      })\r\n    },\r\n    reloadGetData() {\r\n      this.$emit('reloadLikeData')\r\n    },\r\n    isLogin() {\r\n      return this.$store.state.userInfo !== null\r\n    },\r\n    getDianZanDto() {\r\n      const obj = {\r\n        userId: this.$store.state.userInfo.userid,\r\n        commentId: this.itemData.id\r\n      }\r\n      return obj\r\n    },\r\n    deleteComment() {\r\n      deleteCommentById({ id: this.itemData.id }).then(() => {\r\n        this.$message.success('delete success')\r\n        this.$emit('reloadComment')\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.comment-item {\r\n  display: flex;\r\n  justify-content: left;\r\n  margin-bottom: 35px;\r\n  .avatar {\r\n    margin-right: 10px;\r\n  }\r\n  .user-info {\r\n    display: flex;\r\n    flex-direction: column;\r\n    width: 80%;\r\n\r\n    .user-name {\r\n      margin-bottom: 15px;\r\n      font-weight: bold;\r\n\r\n      .grade {\r\n        color: #fff;\r\n        font-size: 12px;\r\n        background: #616ee8;\r\n        border-radius: 2px;\r\n        padding: 1px;\r\n      }\r\n    }\r\n\r\n    .child {\r\n      margin-bottom: 8px;\r\n    }\r\n\r\n    .comment {\r\n      margin-bottom: 5px;\r\n      word-wrap: break-word;\r\n    }\r\n\r\n    .other-info {\r\n      color: #d1d0d2;\r\n      font-size: 12px;\r\n      .dianzan {\r\n        user-select: none;\r\n        i {\r\n          &:hover {\r\n            cursor: pointer;\r\n          }\r\n        }\r\n      }\r\n      .delete-icon {\r\n        cursor: pointer;\r\n        margin-left: 5px;\r\n        user-select: none;\r\n      }\r\n\r\n      .active {\r\n        color: #409eff;\r\n      }\r\n      .time {\r\n        margin-right: 10px;\r\n      }\r\n      .reply {\r\n        margin-left: 10px;\r\n\r\n        &:hover {\r\n          text-decoration: underline;\r\n          cursor: pointer;\r\n          user-select: none;\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n"]}]}