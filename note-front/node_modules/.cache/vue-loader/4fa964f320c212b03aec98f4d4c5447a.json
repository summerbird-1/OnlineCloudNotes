{"remainingRequest":"D:\\2718075060\\Desk\\sspku\\云计算\\Note\\note-front\\node_modules\\.store\\vue-loader@15.11.1\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\2718075060\\Desk\\sspku\\云计算\\Note\\note-front\\src\\views\\notes\\childrens\\NoteCommentItem.vue?vue&type=style&index=0&id=854c5726&lang=less&scoped=true","dependencies":[{"path":"D:\\2718075060\\Desk\\sspku\\云计算\\Note\\note-front\\src\\views\\notes\\childrens\\NoteCommentItem.vue","mtime":1703320567682},{"path":"D:\\2718075060\\Desk\\sspku\\云计算\\Note\\note-front\\node_modules\\.store\\css-loader@3.6.0\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\2718075060\\Desk\\sspku\\云计算\\Note\\note-front\\node_modules\\.store\\vue-loader@15.11.1\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\2718075060\\Desk\\sspku\\云计算\\Note\\note-front\\node_modules\\.store\\postcss-loader@3.0.0\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\2718075060\\Desk\\sspku\\云计算\\Note\\note-front\\node_modules\\.store\\less-loader@5.0.0\\node_modules\\less-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\2718075060\\Desk\\sspku\\云计算\\Note\\note-front\\node_modules\\.store\\cache-loader@4.1.0\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\2718075060\\Desk\\sspku\\云计算\\Note\\note-front\\node_modules\\.store\\vue-loader@15.11.1\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQouY29tbWVudC1pdGVtIHsNCiAgZGlzcGxheTogZmxleDsNCiAganVzdGlmeS1jb250ZW50OiBsZWZ0Ow0KICBtYXJnaW4tYm90dG9tOiAzNXB4Ow0KICAuYXZhdGFyIHsNCiAgICBtYXJnaW4tcmlnaHQ6IDEwcHg7DQogIH0NCiAgLnVzZXItaW5mbyB7DQogICAgZGlzcGxheTogZmxleDsNCiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOw0KICAgIHdpZHRoOiA4MCU7DQoNCiAgICAudXNlci1uYW1lIHsNCiAgICAgIG1hcmdpbi1ib3R0b206IDE1cHg7DQogICAgICBmb250LXdlaWdodDogYm9sZDsNCg0KICAgICAgLmdyYWRlIHsNCiAgICAgICAgY29sb3I6ICNmZmY7DQogICAgICAgIGZvbnQtc2l6ZTogMTJweDsNCiAgICAgICAgYmFja2dyb3VuZDogIzYxNmVlODsNCiAgICAgICAgYm9yZGVyLXJhZGl1czogMnB4Ow0KICAgICAgICBwYWRkaW5nOiAxcHg7DQogICAgICB9DQogICAgfQ0KDQogICAgLmNoaWxkIHsNCiAgICAgIG1hcmdpbi1ib3R0b206IDhweDsNCiAgICB9DQoNCiAgICAuY29tbWVudCB7DQogICAgICBtYXJnaW4tYm90dG9tOiA1cHg7DQogICAgICB3b3JkLXdyYXA6IGJyZWFrLXdvcmQ7DQogICAgfQ0KDQogICAgLm90aGVyLWluZm8gew0KICAgICAgY29sb3I6ICNkMWQwZDI7DQogICAgICBmb250LXNpemU6IDEycHg7DQogICAgICAuZGlhbnphbiB7DQogICAgICAgIHVzZXItc2VsZWN0OiBub25lOw0KICAgICAgICBpIHsNCiAgICAgICAgICAmOmhvdmVyIHsNCiAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjsNCiAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgIH0NCiAgICAgIC5kZWxldGUtaWNvbiB7DQogICAgICAgIGN1cnNvcjogcG9pbnRlcjsNCiAgICAgICAgbWFyZ2luLWxlZnQ6IDVweDsNCiAgICAgICAgdXNlci1zZWxlY3Q6IG5vbmU7DQogICAgICB9DQoNCiAgICAgIC5hY3RpdmUgew0KICAgICAgICBjb2xvcjogIzQwOWVmZjsNCiAgICAgIH0NCiAgICAgIC50aW1lIHsNCiAgICAgICAgbWFyZ2luLXJpZ2h0OiAxMHB4Ow0KICAgICAgfQ0KICAgICAgLnJlcGx5IHsNCiAgICAgICAgbWFyZ2luLWxlZnQ6IDEwcHg7DQoNCiAgICAgICAgJjpob3ZlciB7DQogICAgICAgICAgdGV4dC1kZWNvcmF0aW9uOiB1bmRlcmxpbmU7DQogICAgICAgICAgY3Vyc29yOiBwb2ludGVyOw0KICAgICAgICAgIHVzZXItc2VsZWN0OiBub25lOw0KICAgICAgICB9DQogICAgICB9DQogICAgfQ0KICB9DQp9DQo="},{"version":3,"sources":["NoteCommentItem.vue"],"names":[],"mappings":";AA2HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"NoteCommentItem.vue","sourceRoot":"src/views/notes/childrens","sourcesContent":["<template>\r\n  <div class=\"comment-item\">\r\n    <div class=\"avatar\">\r\n      <el-avatar :size=\"imgSize\" :src=\"itemData.avatarUrl\"> </el-avatar>\r\n    </div>\r\n    <div class=\"user-info\">\r\n      <div :class=\"isChild ? 'user-name child' : 'user-name'\">\r\n        <span>\r\n          {{ itemData.userId }}\r\n        </span>\r\n        <span class=\"grade\">LV {{ itemData.grade }}</span>\r\n      </div>\r\n\r\n      <div class=\"comment\" v-if=\"!isChild\">\r\n        Comments：\r\n        {{ itemData.commentContent }}\r\n      </div>\r\n      <div class=\"comment\" v-else>\r\n        Reply <span style=\"color: #79c9fc\">{{ itemData.replyUserName }}</span\r\n        >：\r\n        {{ itemData.commentContent }}\r\n      </div>\r\n\r\n      <div class=\"other-info\">\r\n        <span class=\"time\">{{ itemData.createdTime }}</span>\r\n        <span class=\"dianzan\" :class=\"isLiked\">\r\n          <i class=\"iconfont icon-dianzan dianzan\" @click=\"handleDianzan\"> </i>\r\n          {{ itemLike ? itemLike.likeNum : '' }}\r\n        </span>\r\n        <i\r\n          class=\"el-icon-delete delete-icon\"\r\n          v-if=\"isDelete\"\r\n          @click=\"deleteComment\"\r\n        ></i>\r\n        <span class=\"reply\" @click=\"handleReply\">Reply</span>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {\r\n  addDianzanComment,\r\n  reduceDianzanComment,\r\n  deleteCommentById\r\n} from '@/network/note/index.js'\r\nexport default {\r\n  props: ['itemData', 'itemLike', 'imgSize'],\r\n  data() {\r\n    return {}\r\n  },\r\n  computed: {\r\n    /**\r\n     * 该item是否是子评论\r\n     */\r\n    isChild() {\r\n      return this.itemData.level != 0\r\n    },\r\n    isLiked() {\r\n      if (!this.itemLike) return ''\r\n      return this.itemLike.isLiked == 1 ? 'active' : ''\r\n    },\r\n    isDelete() {\r\n      if (!this.$store.state.userInfo) {\r\n        return false\r\n      }\r\n      return this.itemData.userId === this.$store.state.userInfo.userid\r\n    }\r\n  },\r\n  methods: {\r\n    handleDianzan() {\r\n      if (!this.isLogin()) {\r\n        this.$message.warning('请登录之后再进行操作')\r\n        return\r\n      }\r\n      if (this.itemLike.isLiked === 0) {\r\n        // 当前用户还未给这篇笔记点过赞\r\n        addDianzanComment(this.getDianZanDto()).then((res) => {\r\n          console.log(res)\r\n          // 刷新数据\r\n          this.reloadGetData()\r\n        })\r\n      } else {\r\n        // 当前用户已经给这篇笔记点过赞\r\n        reduceDianzanComment(this.getDianZanDto()).then((res) => {\r\n          console.log(res)\r\n          // 刷新数据\r\n          this.reloadGetData()\r\n        })\r\n      }\r\n    },\r\n    handleReply() {\r\n      this.$emit('replyUser', {\r\n        id: this.itemData.id,\r\n        userName: this.itemData.userId,\r\n        parentId: this.itemData.parentId,\r\n        noteId: this.itemData.noteId\r\n      })\r\n    },\r\n    reloadGetData() {\r\n      this.$emit('reloadLikeData')\r\n    },\r\n    isLogin() {\r\n      return this.$store.state.userInfo !== null\r\n    },\r\n    getDianZanDto() {\r\n      const obj = {\r\n        userId: this.$store.state.userInfo.userid,\r\n        commentId: this.itemData.id\r\n      }\r\n      return obj\r\n    },\r\n    deleteComment() {\r\n      deleteCommentById({ id: this.itemData.id }).then(() => {\r\n        this.$message.success('delete success')\r\n        this.$emit('reloadComment')\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.comment-item {\r\n  display: flex;\r\n  justify-content: left;\r\n  margin-bottom: 35px;\r\n  .avatar {\r\n    margin-right: 10px;\r\n  }\r\n  .user-info {\r\n    display: flex;\r\n    flex-direction: column;\r\n    width: 80%;\r\n\r\n    .user-name {\r\n      margin-bottom: 15px;\r\n      font-weight: bold;\r\n\r\n      .grade {\r\n        color: #fff;\r\n        font-size: 12px;\r\n        background: #616ee8;\r\n        border-radius: 2px;\r\n        padding: 1px;\r\n      }\r\n    }\r\n\r\n    .child {\r\n      margin-bottom: 8px;\r\n    }\r\n\r\n    .comment {\r\n      margin-bottom: 5px;\r\n      word-wrap: break-word;\r\n    }\r\n\r\n    .other-info {\r\n      color: #d1d0d2;\r\n      font-size: 12px;\r\n      .dianzan {\r\n        user-select: none;\r\n        i {\r\n          &:hover {\r\n            cursor: pointer;\r\n          }\r\n        }\r\n      }\r\n      .delete-icon {\r\n        cursor: pointer;\r\n        margin-left: 5px;\r\n        user-select: none;\r\n      }\r\n\r\n      .active {\r\n        color: #409eff;\r\n      }\r\n      .time {\r\n        margin-right: 10px;\r\n      }\r\n      .reply {\r\n        margin-left: 10px;\r\n\r\n        &:hover {\r\n          text-decoration: underline;\r\n          cursor: pointer;\r\n          user-select: none;\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n"]}]}